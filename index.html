

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Welcome to QUIT’s documentation! &mdash; QUIT  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Categories" href="Docs/Contents.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> QUIT
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Docs/Contents.html">Categories</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">QUIT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Welcome to QUIT’s documentation!</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <img alt="_images/logo.png" src="_images/logo.png" />
<div class="section" id="welcome-to-quit-s-documentation">
<h1>Welcome to QUIT’s documentation!<a class="headerlink" href="#welcome-to-quit-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>Welcome to the QUantitative Imaging Tools, a collection of C++ programs for analysing quantitative MR images. QUIT is divided into several modules, each of which contains numerous programs for processing images. The modules are:</p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Docs/Contents.html">Categories</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Docs/Relaxometry.html">Relaxometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="Docs/Perfusion.html">Perfusion</a></li>
<li class="toctree-l2"><a class="reference internal" href="Docs/MT.html">Magnetization Transfer</a></li>
<li class="toctree-l2"><a class="reference internal" href="Docs/SSFP.html">SSFP</a></li>
<li class="toctree-l2"><a class="reference internal" href="Docs/Susceptibility.html">Susceptibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="Docs/Stats.html">Statistics / GLM Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="Docs/Utilities.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="Docs/Developer.html">Developer</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="citing">
<h2>Citing<a class="headerlink" href="#citing" title="Permalink to this headline">¶</a></h2>
<p>QUIT has been published in the Journal of Open Source Software. If you use it, please cite:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Wood, (2018). QUIT: QUantitative Imaging Tools. Journal of Open Source Software, 3(26), 656, <a class="reference external" href="https://doi.org/10.21105/joss.00656">https://doi.org/10.21105/joss.00656</a></p>
</div>
<p>Thank you.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Pre-compiled binaries are provided for Linux and Mac OS X in a .tar.gz archive from the <a class="reference external" href="http://github.com/spinicist/QUIT/releases&quot;Releases&quot;">releases page</a>.</p>
<p>Download the correct archive for your platform, untar it and then ensure that the binaries can be found via your <cite>PATH</cite> environment variable. Either edit your shell profile (e.g. <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>) and add the QUIT directory your <code class="docutils literal notranslate"><span class="pre">$PATH</span></code> variable there, or copy the files to somewhere that will be on your path, e.g. <code class="docutils literal notranslate"><span class="pre">/usr/local/bin</span></code> (this will likely require <code class="docutils literal notranslate"><span class="pre">sudo</span></code> permissions).</p>
<p>The Linux binaries are built with Ubuntu 14.04 with GCC 7. If you need to run on an older version of Linux with a previous version of <code class="docutils literal notranslate"><span class="pre">glibc</span></code> then you may need to compile from source.</p>
</div>
<div class="section" id="compile-from-source">
<h2>Compile From Source<a class="headerlink" href="#compile-from-source" title="Permalink to this headline">¶</a></h2>
<p>See the <a class="reference internal" href="Docs/Developer.html"><span class="doc">Developer</span></a> documentation.</p>
</div>
<div class="section" id="general-usage">
<h2>General Usage<a class="headerlink" href="#general-usage" title="Permalink to this headline">¶</a></h2>
<p>QUIT programs take their input as a combination of command-line arguments and text files passed to <code class="docutils literal notranslate"><span class="pre">stdin</span></code>. If you run a QUIT program with no arguments then will see a message like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~: qidespot1
SPGR FILE was not specified. Use --help to see usage.
&gt;
</pre></div>
</div>
<p>If you then run it with <code class="docutils literal notranslate"><span class="pre">--help</span></code>, you will see some usage instructions:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~: qidespot1 --help
qidespot1 <span class="o">{</span>OPTIONS<span class="o">}</span> <span class="o">[</span>SPGR FILE<span class="o">]</span>

    Calculates T1 maps from SPGR data
    http://github.com/spinicist/QUIT

OPTIONS:

    SPGR FILE                         Path to SPGR data
    -h, --help                        Show this <span class="nb">help</span> message
    -v, --verbose                     Print more information
    -T<span class="o">[</span>THREADS<span class="o">]</span>, --threads<span class="o">=[</span>THREADS<span class="o">]</span>  Use N threads <span class="o">(</span><span class="nv">default</span><span class="o">=</span><span class="m">4</span>, <span class="nv">0</span><span class="o">=</span>hardware
                                        limit<span class="o">)</span>
    -o<span class="o">[</span>OUTPREFIX<span class="o">]</span>, --out<span class="o">=[</span>OUTPREFIX<span class="o">]</span>  Add a prefix to output filenames
    -b<span class="o">[</span>B1<span class="o">]</span>, --B1<span class="o">=[</span>B1<span class="o">]</span>                 B1 map <span class="o">(</span>ratio<span class="o">)</span> file
    -m<span class="o">[</span>MASK<span class="o">]</span>, --mask<span class="o">=[</span>MASK<span class="o">]</span>           Only process voxels within the mask
    -s<span class="o">[</span>SUBREGION<span class="o">]</span>,
    --subregion<span class="o">=[</span>SUBREGION<span class="o">]</span>           Process subregion starting at voxel
                                        I,J,K with size SI,SJ,SK
    -r, --resids                      Write out residuals <span class="k">for</span> each data-point
    -a<span class="o">[</span>ALGO<span class="o">]</span>, --algo<span class="o">=[</span>ALGO<span class="o">]</span>           Choose algorithm <span class="o">(</span>l/w/n<span class="o">)</span>
    -i<span class="o">[</span>ITERS<span class="o">]</span>, --its<span class="o">=[</span>ITERS<span class="o">]</span>          Max iterations <span class="k">for</span> WLLS/NLLS <span class="o">(</span>default
                                        <span class="m">15</span><span class="o">)</span>
    -p<span class="o">[</span>CLAMP PD<span class="o">]</span>, --clampPD<span class="o">=[</span>CLAMP
    PD<span class="o">]</span>                               Clamp PD between <span class="m">0</span> and value
    -t<span class="o">[</span>CLAMP T1<span class="o">]</span>, --clampT2<span class="o">=[</span>CLAMP
    T1<span class="o">]</span>                               Clamp T1 between <span class="m">0</span> and value
    <span class="s2">&quot;--&quot;</span> can be used to terminate flag options and force all following
    arguments to be treated as positional options
</pre></div>
</div>
<p>The first line shows that DESPOT1 expects a single input image, in this case SPGR/FLASH/FFE, specified on the command line. However, if you naively run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~: qidespot1 some_spgr_data.nii.gz
</pre></div>
</div>
<p>Nothing will happen. This is because most imaging formats do not store parameters that are required for quantitative imaging, e.g. the repetition time and flip-angles in their headers. QUIT programs hence expect to read this information in a text file passed to <code class="docutils literal notranslate"><span class="pre">stdin</span></code>. If you create a small text file <code class="docutils literal notranslate"><span class="pre">spgr.json</span></code> containing the following:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;SPGR&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;TR&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
        <span class="nt">&quot;FA&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and run the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~: qidespot1 some_spgr_data.nii.gz &lt; spgr.json
</pre></div>
</div>
<p>then - provided your input data does contain two volumes corresponding to flip-angles 3 and 18 degrees - DESPOT1 will run, and you should see two files created (<code class="docutils literal notranslate"><span class="pre">D1_T1.nii.gz</span></code> and <code class="docutils literal notranslate"><span class="pre">D1_PD.nii.gz</span></code>). If you want to see what the programs are doing while running, specify the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> or <code class="docutils literal notranslate"><span class="pre">-v</span></code> options.</p>
</div>
<div class="section" id="common-options">
<h2>Common Options<a class="headerlink" href="#common-options" title="Permalink to this headline">¶</a></h2>
<p>The following options are supported by most, but not necessarily all, QUIT programs.</p>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">--out,</span> <span class="pre">-o</span></code></p>
<blockquote>
<div><p>Add a prefix to the output parameter files. By default, most QUIT programs write their output files using filenames in a pattern <cite>PROGRAM_PARAMETER.nii.gz</cite>. They will overwrite any existing files with the same names. If you need to save the output from multiple runs of the same program, or want to save output to a particular directory, use this option to add an addtional prefix to the output names.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">--mask,</span> <span class="pre">-m</span></code></p>
<blockquote>
<div><p>Specify a mask file, where non-zero values indicate that voxels should be processed, and zero values indicate that voxels should not be processed. The background voxels will be set to zero in the final image. This is useful for two reasons, first is to simply speed up processing for long-running programs (e.g. <cite>qimcdespot</cite>), second is that outside the head fitting data is non-sensical, as there is no signal. Hence these regions appear very noisy on output maps, which can make visualization difficult.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">--threads,</span> <span class="pre">-t</span></code></p>
<blockquote>
<div><p>Control the maximum number of threads used. The majority of QUIT programs are multi-threaded across voxels to improve processing times. In some parallel computing environments (e.g. Sun Grid Engine), it is possible to set the maximum number of cores available to a program, and it is hence good for CPU utilisation to match the number of threads to the number of cores. The default is 4. Note that HyperThreading may make the number of logical cores appear to be double the number of physical cores - QUIT programs are CPU bound, not IO bound, and hence gain no benefit from HyperThreading. You are better to specify the number of physical cores available rather than the number of logical cores.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">--subregion,</span> <span class="pre">-s</span></code></p>
<blockquote>
<div><p>Similar to <cite>–mask</cite>, this command will only process a sub-region of the input images. The argument needs to be in the format <cite>“start_i,start_j,start_k,size_i,size_j,size_k”</cite> where <cite>i,j,k</cite> are voxel indices (not physical co-ordinates). This is useful to speed up processing for trial-runs of pipelines.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">--resids,</span> <span class="pre">-r</span></code></p>
<blockquote>
<div><p>Most QUIT programs will write out a single root-sum-squared residual image along with their parameter maps. Use this option to also output residuals for each data-point to look for systematic offsets. Note that if multiple inputs are specified (e.g. <cite>qimcdespot</cite>), then this option will write out a single cocatenated file for all input data-points in order.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">--B1,</span> <span class="pre">-b</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">--f0,</span> <span class="pre">-f</span></code></p>
<blockquote>
<div><p>Several of the QUIT programs take B1 (relative flip-angle) and f0 (off-resonance in Hz) maps as correction factors.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="file-formats">
<h2>File Formats<a class="headerlink" href="#file-formats" title="Permalink to this headline">¶</a></h2>
<p>By default, QUIT is compiled with support for NIFTI and NRRD formats. The preferred file-format is NIFTI for compatibility with FSL and SPM. By default QUIT will output <code class="docutils literal notranslate"><span class="pre">.nii.gz</span></code> files. This can be controlled by the <cite>QUIT_EXT</cite> environment variable. Valid values for this are any file extension supported by ITK that QUIT has been compiled to support, e.g. <code class="docutils literal notranslate"><span class="pre">.nii</span></code> or <code class="docutils literal notranslate"><span class="pre">.nrrd</span></code>, or the FSL values <code class="docutils literal notranslate"><span class="pre">NIFTI</span></code>, <code class="docutils literal notranslate"><span class="pre">NIFTI_PAIR</span></code>, <code class="docutils literal notranslate"><span class="pre">NIFTI_GZ</span></code>, <code class="docutils literal notranslate"><span class="pre">NIFTI_PAIR_GZ</span></code>.</p>
<p>The <a class="reference external" href="http://itk.org">ITK</a> library supports a much wider variety of file formats, but adding support for all of these almost triples the size of the compiled binaries. Hence by default they are excluded. You can add support for more file formats by compiling QUIT yourself, see the <a class="reference internal" href="Docs/Developer.html"><span class="doc">Developer</span></a> documentation. Note that ITK cannot write every format it can read (e.g. it can read Bruker 2dseq datasets, but it cannot write them).</p>
</div>
<div class="section" id="scripting">
<h2>Scripting<a class="headerlink" href="#scripting" title="Permalink to this headline">¶</a></h2>
<p>The QUIT tools are designed to be used inside shell scripts or SGE jobs. 3 scripts are provided along with the binaries. <code class="docutils literal notranslate"><span class="pre">qi_composer.sh</span></code> uses the <code class="docutils literal notranslate"><span class="pre">qi_coil_combine</span></code> program to correctly combine complex data from multiple element RF coils. <code class="docutils literal notranslate"><span class="pre">qi_example_mcd_b1.sh</span></code> and <code class="docutils literal notranslate"><span class="pre">qi_example_mcd_hifi.sh</span></code> give example mcDESPOT processing pipelines. The first assumes that you have a good B1 map and have already registered all the input volumes to a common reference. The second shows one of doing this using FSL. Registration is beyond the scope of QUIT, so you must have additional tools installed for this.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Docs/Contents.html" class="btn btn-neutral float-right" title="Categories" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Tobias Wood.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>